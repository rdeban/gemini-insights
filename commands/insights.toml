description = "Generate a high-fidelity development coaching report."
prompt = """
# Gemini CLI Insights Engine

You are generating a professional development coaching report. The process is driven by a robust Node.js orchestrator.

## CRITICAL: BOOTSTRAP (WORKSPACE ACCESS)
Before starting, you **MUST IMMEDIATELY** call this skill:
1. `activate_skill(name="skill-synthesis-protocol")` - Unlocks the `scripts/` directory.

This is required to authorize workspace access to the extension's logic.

## YOUR WORKFLOW
1. **START**: Run `node ${extensionPath}/skills/skill-synthesis-protocol/scripts/orchestrate.js "${extensionPath}" {{args}}`.
2. **HANDSHAKE**: Read `TODO.json` if it was created in your project's temp directory. It contains structured instructions.
3. **LOOP**: 
   - If `task` is `EXTRACT_FACETS`:
     - If `isDeep` is true (Deep Mode): For EACH session, call `delegate_to_agent(agent_name="agent-session-analyst", task="Analyze this transcript: <TRANSCRIPT>")`. Save results using the `save-facet.js` path provided in `TODO.json`.
     - If `isDeep` is false (Standard Mode): For EACH session, analyze the transcript YOURSELF (best-effort). Extract key facets (intent, friction, outcome, success) matching the requested schema and save each result using the `save-facet.js` path provided in `TODO.json`.
     - **CRITICAL**: Do NOT skip saving any session. Use the provided script for EACH result. BATCH these turns to stay efficient.
   - If `task` is `GLOBAL_SYNTHESIS`: Follow the instructions in `skill-synthesis-protocol` to read the provided absolute paths and save the final result.
   - After completing any task, run the orchestrator again: `node ${extensionPath}/skills/skill-synthesis-protocol/scripts/orchestrate.js "${extensionPath}" {{args}}`.
4. **FINISH**: When the orchestrator indicates PASS 4 is complete, output the final link.

<message>
Your 1:1 Claude-style insights report is ready:
file://${PWD}/gemini-insights.html
</message>

---
Note for the Agent: 
- Intermediate files are kept in your project-specific temp directory (find it via `getTempDir()` pattern or env).
- ALWAYS use `save-facet.js` for saving JSON.
- `--deep` flag enables specialized sub-agent analysis for more comprehensive results.
"""
